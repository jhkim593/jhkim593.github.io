---
layout: post
title: "Spring AOP (Aspect Oriented Programming) (1) "
author: "jhkim593"
tags: Spring

---

## 1. AOP (Aspect Oriented Programming)
>AOP는 즉 관점 지향 프로그래밍이란 , 횡단 관심사의 분리를 허용함으로써 모듈성을 증가 시키>는 것이 목적인 프로그래밍 패러다임이다.

애플리케이션 로직은 크게 핵심 기능과 부가 기능으로 나눌 수 있다.
핵심 기능은 해당 객체가 제공하는 고유의 기능이다. 부가 가능은 핵심 기능을 보조 해주기 위한 기능인데 로그 추적 기능 , 시간 계산 , 트랜잭션 처리등 핵심 기능과 함께 사용된다.


핵심 로직에 부가 기능이 더해져 하나의 로직을 완성 하게되는데 보통 부가 기능은 여러 클래에 걸쳐서 공통 적으로 사용되는 경우가 많다.
예를 들어 모든 애플리케이션 호출을 로깅해야 하는 요구 사항이 있다고 할 때
<br>

<img src="https://user-images.githubusercontent.com/53510936/180631489-dc81bc7a-9870-4f59-9a95-dfc58bf2a1a2.png" />

이러한 부가 기능인 로그 추적 기능이 여러 곳에서 동일하게 사용되게 되는데 이것은  `횡단 관심사`가 된다.
<br>

이런 부가 기능을 적용 하는 클래스가 100개면 100개 모두 중복되는 코드를 추가해야 하며 , 이 부가 기능이 수정 된다고 했을 때 이미 적용되어 있는 100개의 클래스 모두를 하나씩 찾아가면서 수정해야 한다.
<br>

##### 부가 기능을 적용시 문제
1. 동일한 부가 기능이 여러 곳에서 사용될 때 중복 코드가 생김
2. 부가 기능을 변경 할 때 중복 떄문에 많은 수정이 필요
3. 부가 기능 적용 대상을 변경 하기 위해 많은 수정이 필요

<br>
소프트웨어 개발에서 변경 지점은 하나가 될 수 있도록 잘 모듈화가 되어야 하는데 부가 기능과 부가 기능을 어디에 적용 할지 선택하는 기능을 합쳐서 하나의 모듈로 만든 것이 `Aspect`이다.
Aspect는 우리말로 해석하면 `관점`이라는 뜻인데 이렇게 Aspect를 사용한 프로그래밍 방식을 `AOP` 라한다.
한마디로 `AOP`는 `OOP`가 처리하기 어려운 횡단 관심사를 보조하기 위한 목적으로 개발 되었다.

<br>
### 2. AOP 적용

AOP 적용 방식에는 크게 세가지 방법이 있다.
1. 컴파일 시점
2. 클래스 로딩 시점
3. 런타임 시점 (프록시)

<br>

Spring AOP는 3번째인 런타임 시점에 프록시를 통해 AOP를 적용하고 있다. 따라서 항상 프록시를 통해야 부가 기능을 사용할 수있다.
 AOP를 적용할 수 있는 지점을 `조인 포인트 (Join point)`라고 하는데 프록시를 사용하는 스프링 AOP의 조인 포인트는 메서드 실행으로만 제한되며 , 프록시 방식을 사용하는 스프링 AOP는 스프링 컨테이너가 관리할 수 있는 스프링 빈에만 AOP를 적용할 수 있다.

<br>
### 3. AOP 용어
- 어드바이스(Advice)
  - 부가 기능
  - 특정 조인 포인트에서 Aspect에 의해 취해지는 조치
  - Around(주변), Before(전), After(후)와 같은 다양한 종류의 어드바이스가 있음
- 조인 포인트 (Join point)
  - 어드바이스(부가 기능)가 적용될 수 있는 위치 (메소드 실행 , 생성자 호출 , 필드값 접근 등) 프로그램 실행 중 시점
  - 한마디로 AOP를 적용할 수 있는 모든 지점
  - 스프링 AOP는 프록시 방식을 사용 하기 때문에 메소드 실행 지점으로 제한
- 포인트 컷 (Point Cut)
  - 조인 포인트 중에서 어드바이스가 적용될 위치를 선별하는 기능
  - 주로 AspectJ 표현식을 사용해서 지정
  - 프록시를 사용하는 스프링 AOP는 메서드 실행 지점만 포인트컷으로 선별 가능
- 타켓(Target)
  - 어드바이스를 받는 객체, 포인트컷으로 결정
- 어드바이저(Advisor)
  - 하나의 어드바이스와 하나의 포인트 컷으로 구성
  - 스프링 AOP에서만 사용되는 특별한 용어
- 위빙(Weaving)
  - 포인트컷으로 결정한 타켓의 조인 포인트에 어드바이스를 적용하는 것
  - 위빙을 통해 핵심 기능 코드에 영향을 주지 않고 부가 기능을 추가 할 수 있음

---
## Reference

[Spring 핵심원리 고급편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89%ED%8E%B8/dashboard) 
